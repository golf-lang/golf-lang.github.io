<!DOCTYPE html>
<html lang="en">

<head>
<!--__GOLF_REDIRECT__-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

<title>Fast JSON parser with little coding</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="HandheldFriendly" content="True"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="canonical" href="https://rimstone-lang.com/article-json.html" />
<style>


body, html {
    font-family: Quicksand,monospace,Helvetica, Arial, sans-serif;
    line-height: 150%;
    font-size:16px;
}

body {
    padding-left:1vw;
    padding-right:1vw;
}
    
.ncode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.shcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.sqlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.htmlcode {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

.code {
    letter-spacing: 0px;
    font-family: monospace;
    font-size:83%;
    display:inline-block;
    max-width:99%;
    min-width:90%;
    margin:0;
    padding:0;
    padding-left:5px;
    padding-top:3px;
    padding-bottom:3px;
    margin-bottom:8px;
    margin-top:8px;
    border: 2px solid #d6d6d6;
    background-color:#f5f7f4;
    white-space:nowrap;
}

/*Just like h1 but for pdf conversion it would be indented this way it's not*/
.vhub {
    display: block;
   font-size: 1.6em;
   margin-top: 0.63em;
   margin-bottom: 0.63em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

/*Just like h2 but for pdf conversion it would be indented this way it's not*/
.vsub {
    display: block;
   font-size: 1.25em;
   margin-top: 0.53em;
   margin-bottom: 0.53em;
   margin-left: 0;
   margin-right: 0;
   font-weight: bold;
}

ul {
  margin-left: 0.75vw;
  padding-left: 0;
}
li {
  margin-left: 0.75vw;
  padding-left: 0;
}

/* this must be last, as it overrides previous settings, for mobile */
@media (hover: none) {
a {
   display: inline-block;
   padding-top: 3px;
   padding-bottom: 2px;
}
body {
    padding-left:2vw;
    padding-right:2vw;
    letter-spacing: 1px;
}
}

/*The following is for code snippets that are highlighted by 2html vim*/
pre { overflow-x: scroll; margin:0; padding:0; font-family:monospace; }
.Identifier { color: #008b8b; }
.Statement { color: #af5f00; }
.PreProc { color: #5fd7ff; }
.Type { color: #005f00; }
.Comment { color: blue ; }
.Constant { color: #ff00ff; }
/*end of highlighted snippets*/

a {
    text-decoration:none;
    padding-bottom: 0px; 
    color:inherit;
    border-bottom: 2px solid #6cb8f0;
}
a:hover {
    text-decoration: none;
    color:black;
    border-bottom: 1px solid red;
}
/*do not underline links nor should they be active*/
pre a {
    text-decoration:none;
    color:black;
    border-bottom: none;
    pointer-events: none;
    cursor: default;
}


.golfSnippet {display:none;}

ul {
  list-style-type:square;
  list-style-position: outside;
}

</style>


</head>
<body>
<div id="google_translate_element" style='float:right'></div>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>
function gg_copy(gt, eid, gc) {
  gt.textContent = eid.textContent;
  gt.select();
  document.execCommand("copy");
  gc.style.visibility="visible"
  setTimeout(()=>{ gc.style.visibility="hidden"; }, 1000);
}
function googleTranslateElementInit() {
   new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}

</script>

<!--GOLFMENU13-->

<!--GOLFENDMENU13-->



<!--BEGVDOC90-->
<div class='vhub' style='margin-top:10px;margin-right:20px;text-align:left;background-color:white;'><a href='https://rimstone-lang.com' style='border-bottom:0px'><img src='https://rimstone-lang.com/rimstone.png'/></a></div><div class='vhub' style='margin-top:10px;'>Fast JSON parser with little coding</div><hr/><br/>
Golf's JSON parser produces an array of name/value pairs. A name is a path to value, for instance "country"."state"."name", and the value is simply the data associated with it, for instance "Idaho". You can control if the name contains array indexes or not, for instance if there are multiple States in the document, you might have names like "country"."state"[0]."name" with [..] designating an array element.<br/>
<br/>
You can iterate through this array and get names of JSON elements, examine if they are of interest to you, and if so, get the values. This typical scenario is how Golf's parser is built, since it uses a "lazy" approach, where values are not allocated until needed, speeding up parsing. That is the case in this example. The JSON document below is examined and only the names of the cities are extracted.<br/>
<br/>
You can also store JSON elements into trees or hashes for future fast retrieval, or store them into a database, etc.<br/>
<br/>
To get started, create a directory for this example and position in it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_167' class=notranslate>
<span class="Statement">mkdir</span> <span class="Special">-p</span> json
<span class="Statement">cd</span> json</pre>
<span id=rimstone_copied_167 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_167' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='gg_copy(rimstonet_167, code_167, rimstone_copied_167)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Save this JSON into a file "countries.json" - we will get the names of the cities from it:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_165' class=notranslate>
{ &quot;country&quot;: [
    { 
        &quot;name&quot;: &quot;USA&quot;,
        &quot;state&quot;: [
            { 
                &quot;name&quot;: &quot;Arizona&quot;,
                &quot;city&quot;: [
                    {
                        &quot;name&quot; : &quot;Phoenix&quot;,
                        &quot;population&quot;: 5000000
            	    } ,
                    {
                        &quot;name&quot; : &quot;Tuscon&quot;,
                        &quot;population&quot;: 1000000
            	    } 

                ]
            } ,
            { 
                &quot;name&quot;: &quot;California&quot;,
                &quot;city&quot;: [
                    {
                        &quot;name&quot; : &quot;Los Angeles&quot;,
                        &quot;population&quot;: 19000000
            	    },
                    {
                        &quot;name&quot; : &quot;Irvine&quot;
            	    }
                ]
            } 
        ] 
    } ,
    { 
        &quot;name&quot;: &quot;Mexico&quot;,
        &quot;state&quot;: [
            { 
                &quot;name&quot;: &quot;Veracruz&quot;,
                &quot;city&quot;: [
                    {
                        &quot;name&quot; : &quot;Xalapa-Enr\u00edquez&quot;,
                        &quot;population&quot;: 8000000
            	    },
                    {
                        &quot;name&quot; : &quot;C\u00F3rdoba&quot;,
                        &quot;population&quot;: 220000
            	    }
                ]
            } ,
            { 
                &quot;name&quot;: &quot;Sinaloa&quot;,
                &quot;city&quot;: [
                    {
                        &quot;name&quot; : &quot;Culiac\u00E1n Rosales&quot;,
                        &quot;population&quot;: 3000000
            	    }
                ]
            } 
        ] 
    }
    ]
}</pre>
<span id=rimstone_copied_165 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_165' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='gg_copy(rimstonet_165, code_165, rimstone_copied_165)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
What follows is the code to parse JSON. We open a JSON file, process the document, check for errors, and then read elements one by one. We look for a key "country"."state"."city"."name" because those contains city names. Note use "no-enum" clause in <a href='https://rimstone-lang.com/json-doc.html'>json-doc</a> (which is the Golf's JSON parser), so that element designations aren't showing (meaning we don't have [0], [1] etc. for arrays). <br/>
<br/>
Save this code to "parse-json.golf":<br/>
<div class='code'  style='position:relative;padding-right:16px;'>
<pre id='code_166' class=notranslate>
begin-handler /parse-json public
    // Read the JSON file
    read-file &quot;countries.json&quot; to countries status st
    if-true st lesser-equal 0
        @Cannot read file or file empty
        exit-handler -1
    end-if

    // Parse JSON
    json-doc countries no-enum status st error-text et error-position ep to json

    // Check for errors in JSON document
    if-true st not-equal GG_OKAY
        @Error [&lt;&lt;print-out et&gt;&gt;] at [&lt;&lt;print-out ep&gt;&gt;]
        exit-handler -2
    end-if

    // This is the JSON element we're looking for
    set-string city_name unquoted =&quot;country&quot;.&quot;state&quot;.&quot;city&quot;.&quot;name&quot;

    // Read elements one by one - note you can then store them in a tree or hash for future fast searches
    start-loop
        // Read just a key
        read-json json key k type t
        // Exit if end of document
        if-true t equal GG_JSON_TYPE_NONE
            break-loop
        end-if
        // If matches key we're looking for, get the value, and output it
        if-true city_name equal k
            read-json json value v
            @Value [&lt;&lt;print-out v&gt;&gt;]
            @--------
        end-if
        // Move on to the next JSON element
        read-json json next
    end-loop

    // Optionally delete JSON object, or it will be automatically deleted
    json-doc delete json
end-handler</pre>
<span id=rimstone_copied_166 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_166' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='gg_copy(rimstonet_166, code_166, rimstone_copied_166)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Create "json" application ("-k") and compile it ("-q"):<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_169' class=notranslate>
gg <span class="Special">-k</span> json <span class="Special">-q</span></pre>
<span id=rimstone_copied_169 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_169' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='gg_copy(rimstonet_169, code_169, rimstone_copied_169)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Copy the above JSON file into application home directory so we can use it without a path (since this directory is your program's default directory) - you can, of course, also specify any absolute or relative path in Golf code above:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_170' class=notranslate>
<span class="Statement">cp</span> countries.json ~/.golf/apps/json/app</pre>
<span id=rimstone_copied_170 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_170' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='gg_copy(rimstonet_170, code_170, rimstone_copied_170)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Run it:<br/>
<div class="shcode" style='position:relative;padding-right:16px;'>
<pre id='code_171' class=notranslate>
gg <span class="Special">-r</span> <span class="Special">--req</span><span class="Statement">=</span><span class="Statement">&quot;</span><span class="Constant">/parse-json</span><span class="Statement">&quot;</span> <span class="Special">--exec</span></pre>
<span id=rimstone_copied_171 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_171' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='gg_copy(rimstonet_171, code_171, rimstone_copied_171)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
The result is:<br/>
<div class='ncode' style='position:relative;padding-right:16px;'>
<pre id='code_168' class=notranslate>
Content-Type: text/html;charset=utf-8
Cache-Control: max-age=0, no-cache
Pragma: no-cache
Status: 200 OK

Value [Phoenix]
--------
Value [Tuscon]
--------
Value [Los Angeles]
--------
Value [Irvine]
--------
Value [Xalapa-Enríquez]
--------
Value [Córdoba]
--------
Value [Culiacán Rosales]</pre>
<span id=rimstone_copied_168 style='position:absolute;right:-14px;top:-30px; cursor: pointer;visibility:hidden;background:white;'>Copied!</span>
<textarea id='rimstonet_168' style='position: absolute;left: -500%;'></textarea>
<img src='https://rimstone-lang.com/rimstone-copy-small-1.png' id='rimstoneb' onclick='gg_copy(rimstonet_168, code_168, rimstone_copied_168)' style='position:absolute;right:0;top:0; cursor: pointer;opacity:0.5;'/>
</div><br/>
Golf programs work exactly the same when you run them from command line as they do as web services or applications, hence you get the HTTP header in the output. You can avoid it by using <a href='https://rimstone-lang.com/silent-header.html'>silent-header</a> in your Golf code, or by using "--silent-header" option in the above <a href='https://rimstone-lang.com/gg.html'>gg</a> execution call. <br/>
<br/>
You can also omit "--exec" option in the above gg execution call, which will display environment variable settings and the path to your executable. Then you can run those directly. This is useful if you're running a Golf command line program in batch mode from command line repeatedly, as it's faster than using gg.<br/>
<!--ENDVDOC90-->
<br/><div style='width:100%;clear:both;'>
<hr/>
<!--GOLFFOOT77--><span style='font-size:80%'><a href="https://rimstone-lang.com/copyright.html">Copyright</a> (c) 2019-2025 Gliim LLC. All contents on this web site is "AS IS" without warranties or guarantees of any kind.</span>
</div><br/></body></html>


